<Project>
	<PropertyGroup>
		<WasmPWAManifestFile Condition="$(WasmPWAManifestFile) == ''">$(WasmProjectFolder)manifest.webmanifest</WasmPWAManifestFile>
		<AppDesignerFolder Condition="$(AppDesignerFolder) == ''">$(WasmProjectFolder)Properties</AppDesignerFolder>
		<!--
			Supports Deep Linking Routes
			https://aka.platform.uno/wasm-deeplink
		-->
		<WasmShellWebAppBasePath Condition="$(WasmShellWebAppBasePath) == ''">/</WasmShellWebAppBasePath>
	</PropertyGroup>

	<PropertyGroup Condition="'$(Configuration)'=='Debug'">
		<MonoRuntimeDebuggerEnabled>true</MonoRuntimeDebuggerEnabled>
		<DefineConstants Condition="!$(DefineConstants.Contains(DEBUG))">$(DefineConstants);DEBUG</DefineConstants>
		<DefineConstants Condition="!$(DefineConstants.Contains(TRACE))">$(DefineConstants);TRACE</DefineConstants>
		<!--
			IL Linking is disabled in Debug configuration.
			When building in Release, see https://platform.uno/docs/articles/features/using-il-linker-WebAssembly.html
		-->
		<WasmShellILLinkerEnabled Condition="$(WasmShellILLinkerEnabled) == ''">false</WasmShellILLinkerEnabled>
	</PropertyGroup>

	<ItemGroup Condition="$(EnableDefaultUnoItems) == 'true'">
		<Content Include="$([System.IO.Path]::Combine('$(MSBuildProjectDirectory)', '$(WasmProjectFolder)', 'manifest.webmanifest'))"
			Condition="Exists('$(WasmProjectFolder)manifest.webmanifest')"
			Exclude="@(Content)"
			Link="$([MSBuild]::MakeRelative ('$(MSBuildProjectDirectory)', '%(Identity)'))"
			IsDefaultItem="true" />
		<EmbeddedResource Include="$(WasmProjectFolder)WasmCSS\Fonts.css"
			Condition="Exists('$(WasmProjectFolder)WasmCSS\Fonts.css')"
			Exclude="@(EmbeddedResource)"
			Link="$([MSBuild]::MakeRelative ('$(MSBuildProjectDirectory)', '%(Identity)'))"
			IsDefaultItem="true" />
		</EmbeddedResource>
		<EmbeddedResource Include="$(WasmProjectFolder)WasmScripts\AppManifest.js"
			Condition="Exists('$(WasmProjectFolder)WasmScripts\AppManifest.js')"
			Exclude="@(EmbeddedResource)"
			Link="$([MSBuild]::MakeRelative ('$(MSBuildProjectDirectory)', '%(Identity)'))"
			IsDefaultItem="true" />
		<LinkerDescriptor Include="$(WasmProjectFolder)LinkerConfig.xml"
			Condition="Exists('$(WasmProjectFolder)LinkerConfig.xml')"
			Exclude="@(LinkerDescriptor)"
			Link="$([MSBuild]::MakeRelative ('$(MSBuildProjectDirectory)', '%(Identity)'))"
			IsDefaultItem="true" />
	</ItemGroup>

	<ItemGroup Condition="$(PlatformsProjectFolder) != '' and Exists($(PlatformsProjectFolder))">
		<_TargetPlatformFiles Include="$(WasmProjectFolder)**/*" />
		<_AllPlatformFiles Include="$(PlatformsProjectFolder)**\*" />
		<_IgnorePlatformFiles Include="@(_AllPlatformFiles)" Exclude="@(_TargetPlatformFiles)" />
		<Compile Remove="@(_IgnorePlatformFiles)" />
		<Content Remove="@(_IgnorePlatformFiles)" />
		<EmbeddedResource Remove="@(_IgnorePlatformFiles)" />
		<Manifest Remove="@(_IgnorePlatformFiles)" />
	</ItemGroup>
</Project>
